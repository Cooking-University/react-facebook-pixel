{"version":3,"file":"index.js","names":["initialized","debug","warn","args","console","info","concat","log","verifyInit","defaultOptions","autoConfig","init","pixelId","advancedMatching","options","window","fbq","f","b","e","v","n","t","s","callMethod","apply","arguments","queue","push","_fbq","loaded","version","createElement","async","src","getElementsByTagName","parentNode","insertBefore","document","pageView","track","title","data","eventData","trackSingle","pixel","trackCustom","event","trackSingleCustom","grantConsent","revokeConsent","slice","join"],"sources":["../src/index.js"],"sourcesContent":["/**\n * React Facebook Pixel Module\n *\n * @package react-facebook-pixel\n * @author  Zain Sajjad <zsajjad93@gmail.com>\n */\n\n//\nlet initialized = false;\nlet debug = false;\n\n/**\n * Utilities\n */\n\n/**\n * Warn\n * @param  {...any} args\n */\nconst warn = (...args) => {\n  if (!debug) {\n    return;\n  }\n  // eslint-disable-next-line no-console\n  console.info(...['[react-facebook-pixel]'].concat(args));\n};\n\n/**\n * Log\n * @param  {...any} args\n */\nconst log = (...args) => {\n  if (!debug) {\n    return;\n  }\n  // eslint-disable-next-line no-console\n  console.info(...['[react-facebook-pixel]'].concat(args));\n};\n\nconst verifyInit = () => {\n  if (!initialized) {\n    warn(\n      'Pixel not initialized before using call ReactPixel.init with required params',\n    );\n  }\n  return initialized;\n};\n\n//\nconst defaultOptions = {\n  autoConfig: true,\n  debug: false,\n};\n\n//\nexport default {\n  init(pixelId, advancedMatching = {}, options = defaultOptions) {\n    if (typeof window === 'undefined') {\n      initialized = false;\n      return;\n    }\n\n    initialized = window && !!window.fbq;\n    /* eslint-disable */\n    !(function(f, b, e, v, n, t, s) {\n      if (f.fbq) return;\n      n = f.fbq = function() {\n        n.callMethod\n          ? n.callMethod.apply(n, arguments)\n          : n.queue.push(arguments);\n      };\n      if (!f._fbq) f._fbq = n;\n      n.push = n;\n      n.loaded = !0;\n      n.version = '2.0';\n      n.queue = [];\n      t = b.createElement(e);\n      t.async = !0;\n      t.src = v;\n      s = b.getElementsByTagName(e)[0];\n      s.parentNode.insertBefore(t, s);\n    })(\n      window,\n      document,\n      'script',\n      'https://connect.facebook.net/en_US/fbevents.js',\n    );\n    /* eslint-enable */\n\n    if (!pixelId) {\n      warn('Please insert pixel id for initializing');\n    } else {\n      if (options.autoConfig === false) {\n        fbq('set', 'autoConfig', false, pixelId); // eslint-disable-line no-undef\n      }\n\n      fbq('init', pixelId, advancedMatching); // eslint-disable-line no-undef\n\n      initialized = true;\n      debug = options.debug;\n    }\n  },\n\n  pageView() {\n    if (!verifyInit()) {\n      return;\n    }\n\n    fbq('track', 'PageView'); // eslint-disable-line no-undef\n\n    if (debug) {\n      log(\"called fbq('track', 'PageView');\");\n    }\n  },\n\n  track(title, data, eventData) {\n    if (!verifyInit()) {\n      return;\n    }\n\n    fbq('track', title, data, eventData); // eslint-disable-line no-undef\n\n    if (debug) {\n      log(`called fbq('track', '${title}');`);\n\n      if (data) {\n        log('with data', data);\n      }\n\n      if (eventData) {\n        log('with eventData', eventData);\n      }\n    }\n  },\n\n  trackSingle(pixel, title, data, eventData) {\n    if (!verifyInit()) {\n      return;\n    }\n\n    fbq('trackSingle', pixel, title, data, eventData); // eslint-disable-line no-undef\n\n    if (debug) {\n      log(`called fbq('trackSingle', '${pixel}', '${title}');`);\n\n      if (data) {\n        log('with data', data);\n      }\n\n      if (eventData) {\n        log('with eventData', eventData);\n      }\n    }\n  },\n\n  trackCustom(event, data, eventData) {\n    if (!verifyInit()) {\n      return;\n    }\n\n    fbq('trackCustom', event, data, eventData); // eslint-disable-line no-undef\n\n    if (debug) {\n      log(`called fbq('trackCustom', '${event}');`);\n\n      if (data) {\n        log('with data', data);\n      }\n\n      if (eventData) {\n        log('with eventData', eventData);\n      }\n    }\n  },\n\n  trackSingleCustom(pixel, event, data, eventData) {\n    if (!verifyInit()) {\n      return;\n    }\n\n    fbq('trackSingle', pixel, event, data, eventData); // eslint-disable-line no-undef\n\n    if (debug) {\n      log(`called fbq('trackSingleCustom', '${pixel}', '${event}');`);\n\n      if (data) {\n        log('with data', data);\n      }\n\n      if (eventData) {\n        log('with eventData', eventData);\n      }\n    }\n  },\n\n  grantConsent() {\n    if (!verifyInit()) {\n      return;\n    }\n\n    fbq('consent', 'grant');\n\n    if (debug) {\n      log(`called fbq('consent', 'grant');`);\n    }\n  },\n\n  revokeConsent() {\n    if (!verifyInit()) {\n      return;\n    }\n\n    fbq('consent', 'revoke');\n\n    if (debug) {\n      log(`called fbq('consent', 'revoke');`);\n    }\n  },\n\n  fbq(...args) {\n    if (!verifyInit()) {\n      return;\n    }\n\n    fbq(...args); // eslint-disable-line no-undef\n\n    if (debug) {\n      log(`called fbq('${args.slice(0, 2).join(\"', '\")}')`);\n\n      if (args[2]) {\n        log('with data', args[2]);\n      }\n    }\n  },\n};\n"],"mappings":"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"}